(this.webpackJsonpsteps=this.webpackJsonpsteps||[]).push([[0],{17:function(e,t,n){},18:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),i=n(9),r=n.n(i),s=(n(17),n(18),n(6)),d=n(11),o=n(2),j=n(5),u=n(12),Y=n(10),b=function e(t,n,c){Object(Y.a)(this,e),this.id=t,this.date=n,this.distance=c},l=n(0);function O(e){var t=e.item,n=e.onRemove,c=e.onModify;return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:t.date}),Object(l.jsx)("td",{children:t.distance}),Object(l.jsxs)("td",{children:[Object(l.jsx)("span",{className:"material-icons",onClick:function(){return c(t.id)},children:"create"}),Object(l.jsx)("span",{className:"material-icons",onClick:function(){return n(t.id)},children:"delete_forever"})]})]})}var f=n(3),m=n.n(f);function h(e){var t=e.items,n=e.onRemove,c=e.onModify;return Object(l.jsxs)("table",{className:"Steps-table",children:[Object(l.jsx)("thead",{className:"table-head",children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:"\u0414\u0430\u0442\u0430 (\u0414\u0414.\u041c\u041c.\u0413\u0413\u0413\u0413)"}),Object(l.jsx)("td",{children:"\u041f\u0440\u043e\u0439\u0434\u0435\u043d\u043e, \u043a\u043c"}),Object(l.jsx)("td",{children:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"})]})}),Object(l.jsx)("tbody",{className:"table-body",children:t.sort((function(e,t){return m()(t.date,["DD.MM.YYYY","DD-MM-YYYY","D.MM.YYYY"]).unix()-m()(e.date,["DD.MM.YYYY","DD-MM-YYYY","D.MM.YYYY"]).unix()})).map((function(e){return Object(l.jsx)(O,{item:e,onRemove:n,onModify:c},e.id)}))})]})}function M(e){var t=Object(c.useState)({dateErr:!1,distanceErr:!1}),n=Object(j.a)(t,2),a=n[0],i=n[1],r=e.form,s=e.onChange,d=e.onSubmit,u=function(){i({dateErr:!1,distanceErr:!1}),m()(r.date,["DD.MM.YYYY","DD-MM-YYYY","D.MM.YYYY"],!0).isValid()||i((function(e){return Object(o.a)(Object(o.a)({},e),{},{dateErr:!0})})),(!r.distance||r.distance<=0)&&i((function(e){return Object(o.a)(Object(o.a)({},e),{},{distanceErr:!0})}))};return Object(l.jsxs)("form",{className:"Steps-form",onSubmit:function(e){return d(e)},children:[Object(l.jsxs)("div",{className:"Steps-fields",children:[Object(l.jsx)("label",{htmlFor:"date",children:"\u0414\u0430\u0442\u0430 (\u0414\u0414.\u041c\u041c.\u0413\u0413\u0413\u0413)"}),Object(l.jsx)("input",{id:"date",name:"date",type:"text",value:r.date,onChange:function(e){return s(e)},onBlur:u}),a.dateErr&&Object(l.jsx)("span",{className:"error",children:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0434\u0430\u0442\u0443"})]}),Object(l.jsxs)("div",{className:"Steps-fields",children:[Object(l.jsx)("label",{htmlFor:"distance",children:"\u041f\u0440\u043e\u0439\u0434\u0435\u043d\u043e, \u043a\u043c"}),Object(l.jsx)("input",{id:"distance",name:"distance",type:"number",value:r.distance,onChange:function(e){return s(e)},onBlur:u}),a.distanceErr&&Object(l.jsx)("span",{className:"error",children:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0440\u0430\u0441\u0441\u0442\u043e\u044f\u043d\u0438\u0435"})]}),Object(l.jsx)("button",{className:"Steps-button",type:"submit",children:"Ok"})]})}function x(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)({date:"",distance:"",id:""}),r=Object(j.a)(i,2),Y=r[0],O=r[1];return Object(l.jsxs)("div",{className:"Steps",children:[Object(l.jsx)(M,{form:Y,onSubmit:function(e){if(e.preventDefault(),m()(Y.date,["DD.MM.YYYY","DD-MM-YYYY","D.MM.YYYY"],!0).isValid()&&Y.distance>0){if(n.some((function(e){return e.id===Y.id})))a(n.map((function(e){return e.id===Y.id?Object(o.a)(Object(o.a)({},e),{},{date:Y.date,distance:Y.distance}):e})));else if(n.some((function(e){return e.date===m()(Y.date,"DD-MM-YYYY").format("DD-MM-YYYY")}))){var t=n.map((function(e){return e.date===m()(Y.date,"DD-MM-YYYY").format("DD-MM-YYYY")?Object(o.a)(Object(o.a)({},e),{},{distance:+e.distance+ +Y.distance}):e}));a(t)}else a((function(e){return[].concat(Object(d.a)(e),[new b(Object(u.a)(),m()(Y.date,"DD-MM-YYYY").format("DD-MM-YYYY"),Y.distance)])}));O((function(e){return{prevForm:e,date:"",distance:"",id:""}}))}},onChange:function(e){var t=e.target,n=t.name,c=t.value;O((function(e){return Object(o.a)(Object(o.a)({},e),{},Object(s.a)({},n,c))}))}}),n.length?Object(l.jsx)(h,{items:n,onRemove:function(e){a(n.filter((function(t){return t.id!==e})))},onModify:function(e){var t=n.find((function(t){return t.id===e}));O({date:t.date,distance:t.distance,id:t.id})}}):Object(l.jsx)("span",{children:"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"})]})}function D(){return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(x,{})})}r.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(D,{})}),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.ce17de02.chunk.js.map